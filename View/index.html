<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net;">
    <title>Sistema de Controle - Reservas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .table-em-andamento { background-color: #a6fcd5 !important; }
        .table-futuras-proximas { background-color: #fff3cd !important; }
        .table-futuras-normais { background-color: #a3a4fc !important; }
        .table-encerradas { background-color: #ff8787 !important; color: #6c757d; }
        .input-inline { width: 80px; text-align: right; }
        .toast-container { position: fixed; top: 20px; right: 20px; z-index: 1090; }
        .btn-acao { padding: 0.25rem 0.5rem; font-size: 0.875rem; }
    </style>
</head>

<body class="bg-light">
    <div class="toast-container" id="toastContainer"></div>

    <div class="container py-4">
        <ul class="nav nav-tabs mb-4" id="meuPainel" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" id="reservas-tab" data-bs-toggle="tab" data-bs-target="#reservas" type="button">üìã Gest√£o de Reservas</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="clientes-tab" data-bs-toggle="tab" data-bs-target="#clientes" type="button">üë• Cadastro de Clientes</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="salas-tab" data-bs-toggle="tab" data-bs-target="#salas" type="button">üö™ Gest√£o de Salas</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button">üìä Dashboard</button>
            </li>
        </ul>

        <div class="tab-content" id="meuPainelContent">

            <div class="tab-pane fade show active" id="reservas" role="tabpanel">
                
                <div class="card mb-4 shadow-sm border-0">
                    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                        <span id="formTitle">‚ú® Registrar Nova Reserva</span>
                        <button type="button" class="btn btn-sm btn-outline-light" onclick="cancelarEdicao()">üîÑ Limpar</button>
                    </div>
                    <div class="card-body">
                        <form id="formReserva" class="row g-2">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Cliente Pagante *</label>
                                <select class="form-select" id="clienteId" required>
                                    <option value="">Carregando...</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Sala de Reuni√£o *</label>
                                <select class="form-select" id="salaId" required>
                                    <option value="">Carregando...</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">T√≠tulo da Reuni√£o *</label>
                                <input type="text" class="form-control" id="tituloReserva" required>
                            </div>
                        <div class="row g-2 align-items-end mt-2">
                                <div class="col-md-2">
                                    <label class="form-label mb-1 small">Respons√°vel *</label>
                                    <input type="text" class="form-control form-control-sm" id="responsavel" required>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mb-1 small">In√≠cio *</label>
                                    <input type="datetime-local" class="form-control form-control-sm" id="dataInicio" required>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mb-1 small">Fim *</label>
                                    <input type="datetime-local" class="form-control form-control-sm" id="dataFim" required>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mb-1 small">Participantes *</label>
                                    <input type="number" class="form-control form-control-sm" id="participantes" min="1" value="1" required>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label mb-1 small">Valor/h (R$)</label>
                                    <input type="number" step="0.01" class="form-control form-control-sm" id="valorHora" value="100.00" required>
                                </div>
                                <div class="col-md-2">
                                    <button type="submit" class="btn btn-sm btn-success w-100" id="btnSalvarReserva">üíæ Salvar</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
                        <span>üìä Listagem de Reservas</span>
                        <button class="btn btn-sm btn-light" onclick="loadReservas(1)">üîÑ Atualizar</button>
                    </div>

                    <div class="card-body bg-light border-bottom py-2">
                        <form id="formFiltros" class="row g-2 align-items-end" onsubmit="event.preventDefault(); loadReservas(1);">
                            <div class="col-md-3">
                                <label class="form-label mb-0 small">Status</label>
                                <select class="form-select form-select-sm" id="filtroStatus">
                                    <option value="">Todos</option>
                                    <option value="Em andamento">Em andamento</option>
                                    <option value="Futuras proximas">Futuras pr√≥ximas</option>
                                    <option value="Futuras normais">Futuras normais</option>
                                    <option value="Encerradas">Encerradas</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label mb-0 small">Empresa</label>
                                <input type="text" class="form-control form-control-sm" id="filtroEmpresa" placeholder="Nome do cliente">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label mb-0 small">Respons√°vel</label>
                                <input type="text" class="form-control form-control-sm" id="filtroResponsavel" placeholder="Nome do respons√°vel">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label mb-0 small">Ordem Cronol√≥gica</label>
                                <select class="form-select form-select-sm" id="filtroOrdenacao">
                                    <option value="asc">Mais antigas primeiro</option>
                                    <option value="desc">Mais recentes primeiro</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label mb-0 small">Data In√≠cio (a partir de)</label>
                                <input type="date" class="form-control form-control-sm" id="filtroDataInicio">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label mb-0 small">Data Fim (at√©)</label>
                                <input type="date" class="form-control form-control-sm" id="filtroDataFim">
                            </div>
                            <div class="col-md-4 d-flex gap-2">
                                <button type="submit" class="btn btn-sm btn-primary w-100">üîç Filtrar</button>
                                <button type="button" class="btn btn-sm btn-secondary w-100" onclick="limparFiltros()">üßπ Limpar</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-sm table-hover align-middle mb-0 text-nowrap">
                            <thead class="table-dark text-center">
                                <tr>
                                    <th>Cliente</th>
                                    <th>T√≠tulo</th>
                                    <th>Respons√°vel</th>
                                    <th>Sala</th>
                                    <th>Participantes</th>
                                    <th>In√≠cio</th>
                                    <th>Fim</th>
                                    <th>Status</th>
                                    <th>Valor/h</th>
                                    <th>Desc %</th>
                                    <th>Total</th>
                                    <th>Pagamento</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="tabelaReservas"></tbody>
                        </table>
                    </div>
                    
                    <div class="card-footer d-flex justify-content-between align-items-center bg-white">
                        <span id="infoPaginacao" class="text-muted">P√°gina 1 de 1</span>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-secondary" id="btnPagAnterior" onclick="mudarPagina(-1)">Anterior</button>
                            <button class="btn btn-sm btn-outline-secondary" id="btnPagProxima" onclick="mudarPagina(1)">Pr√≥xima</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="clientes" role="tabpanel">
                <div class="card mb-4 shadow-sm border-0">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <span>üë§ Cadastrar Novo Cliente</span>
                        <button type="button" class="btn btn-sm btn-outline-light" onclick="cancelarEdicaoCliente()">üîÑ Limpar</button>
                    </div>
                    <div class="card-body">
                        <form id="formCliente" class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label">Nome / Raz√£o Social *</label>
                                <input type="text" class="form-control" id="nomeCliente" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">CPF / CNPJ *</label>
                                <input type="text" class="form-control" id="cpfCnpjCliente" placeholder="0.000.000-00" required>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Telefone *</label>
                                <input type="tel" class="form-control" id="telefoneCliente" placeholder="(67) 0000-0000" required>
                            </div>
                            <div class="col-md-2 d-flex align-items-end">
                                <button type="submit" class="btn btn-primary w-100">üíæ Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-header bg-info text-white">üë• Clientes Registrados</div>
                    <div class="table-responsive">
                        <table class="table table-sm table-hover mb-0">
                            <thead class="table-dark">
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Documento</th>
                                    <th>Telefone</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="tabelaClientes"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="salas" role="tabpanel">
                <div class="card mb-4 shadow-sm border-0">
                    <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                        <span id="formSalaTitle">üö™ Cadastrar Nova Sala</span>
                        <button type="button" class="btn btn-sm btn-outline-light" onclick="cancelarEdicaoSala()">üîÑ Limpar</button>
                    </div>
                    <div class="card-body">
                        <form id="formSala" class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Nome da Sala *</label>
                                <input type="text" class="form-control" id="nomeSala" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Valor/Hora Padr√£o (R$) *</label>
                                <input type="number" step="0.01" min="0.01" class="form-control" id="valorHoraPadrao" placeholder="100.00" required>
                            </div>
                            <div class="col-md-2 d-flex align-items-end">
                                <button type="submit" class="btn btn-success w-100" id="btnSalvarSala">üíæ Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-bottom">
                        <span class="fw-bold">üö™ Salas Cadastradas</span>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>Nome da Sala</th>
                                        <th>Valor/Hora Padr√£o</th>
                                        <th>A√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody id="tabelaSalas"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="dashboard" role="tabpanel">
                
                <div class="card shadow-sm border-0 mb-4 bg-light">
                    <div class="card-body py-2">
                        <form id="formFiltrosDashboard" class="row g-2 align-items-end" onsubmit="event.preventDefault(); aplicarFiltrosDashboard();">
                            <div class="col-md-4">
                                <label class="form-label mb-0 small">Data In√≠cio</label>
                                <input type="date" class="form-control form-control-sm" id="dashDataInicio">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label mb-0 small">Data Fim</label>
                                <input type="date" class="form-control form-control-sm" id="dashDataFim">
                            </div>
                            <div class="col-md-4 d-flex gap-2">
                                <button type="submit" class="btn btn-sm btn-primary w-100">üìä Atualizar Painel</button>
                                <button type="button" class="btn btn-sm btn-outline-secondary w-100" onclick="limparFiltrosDashboard()">üßπ Limpar</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <h4 class="mb-3">Resumo Financeiro e Operacional</h4>

                <div class="row mb-4" id="cardsResumo">
                    <div class="col-md-3">
                        <div class="card text-white bg-primary shadow-sm border-0 h-100">
                            <div class="card-body">
                                <h6 class="card-title text-uppercase text-white-50">Reservas Ativas</h6>
                                <h3 class="mb-0" id="resumoAtivas">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-white bg-success shadow-sm border-0 h-100">
                            <div class="card-body">
                                <h6 class="card-title text-uppercase text-white-50">Faturamento Realizado</h6>
                                <h3 class="mb-0" id="resumoFaturamento">R$ 0,00</h3>
                                <small>Reservas encerradas</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-dark bg-warning shadow-sm border-0 h-100">
                            <div class="card-body">
                                <h6 class="card-title text-uppercase text-dark-50">Receita Prevista</h6>
                                <h3 class="mb-0" id="resumoPrevisto">R$ 0,00</h3>
                                <small>Reservas futuras/em andamento</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-white bg-info shadow-sm border-0 h-100">
                            <div class="card-body">
                                <h6 class="card-title text-uppercase text-white-50">Horas Vendidas</h6>
                                <h3 class="mb-0" id="resumoHoras">0h</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm border-0 mb-4">
                    <div class="card-body bg-white border-bottom d-flex justify-content-between align-items-center">
                        <span>üìà Curva de Ocupa√ß√£o e Faturamento</span>
                    </div>
                    <div class="card-body">
                        <canvas id="graficoOcupacao" height="100"></canvas>
                    </div>
                </div>

            </div>

        </div> </div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>